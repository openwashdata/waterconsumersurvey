<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-GB"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>CLAUDE.md - OpenWashData R Package Review Guide • waterconsumersurvey</title><script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="deps/headroom-0.11.0/headroom.min.js"></script><script src="deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="deps/search-1.0.0/fuse.min.js"></script><script src="deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="CLAUDE.md - OpenWashData R Package Review Guide"><script defer data-domain="openwashdata.github.io" src="https://plausible.io/js/script.js"></script></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="index.html">waterconsumersurvey</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="reference/index.html">Reference</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="search.json"></form></li>
<li class="nav-item"><a class="nav-link" href="https://github.com/openwashdata/waterconsumersurvey/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-title-body">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>CLAUDE.md - OpenWashData R Package Review Guide</h1>
      <small class="dont-index">Source: <a href="https://github.com/openwashdata/waterconsumersurvey/blob/HEAD/CLAUDE.md"><code>CLAUDE.md</code></a></small>
    </div>

<div id="claudemd---openwashdata-r-package-review-guide" class="section level1">

<p>This guide helps Claude Code review R data packages for the openwashdata organization, ensuring consistency, quality, and completeness across all published datasets.</p>
<div class="section level2">
<h2 id="overview">Overview<a class="anchor" aria-label="anchor" href="#overview"></a></h2>
<p>The review process follows a PLAN → CREATE → TEST → DEPLOY workflow. The entire review process starts with the package on the <code>dev</code> branch, and only after ALL issues are resolved will a final PR from dev to main be created. Each phase requires explicit user approval before proceeding.</p>
<p><strong>CRITICAL WORKFLOW RULE</strong>: Claude MUST stop after completing EACH individual issue. The user must manually restart Claude for the next issue.</p>
</div>
<div class="section level2">
<h2 id="review-workflow">Review Workflow<a class="anchor" aria-label="anchor" href="#review-workflow"></a></h2>
<div class="section level3">
<h3 id="id_1-plan-phase">1. PLAN Phase<a class="anchor" aria-label="anchor" href="#id_1-plan-phase"></a></h3>
<p>When initiated via <code>/review-package [package-name]</code>, Claude will:</p>
<ol style="list-style-type: decimal"><li>
<strong>Setup CLAUDE.md for Package Review</strong>
<ul><li>Download the latest CLAUDE.md from openwashdata/pkgreview repository</li>
<li>If CLAUDE.md already exists, append the review guide content</li>
<li>Create backup of existing CLAUDE.md before appending</li>
<li>Provide fallback options if download fails</li>
</ul></li>
<li>
<strong>Analyze Package Structure</strong>
<ul><li>Verify package was created with <code>washr</code> template</li>
<li>Check for required directories: R/, data/, data-raw/, inst/extdata/, man/</li>
<li>Confirm presence of key files: DESCRIPTION, README.Rmd, _pkgdown.yml</li>
<li>Check for existing PRs and dev branches</li>
</ul></li>
<li>
<strong>Create First Review Issue</strong>
<ul><li>Only Issue 1 (General Information &amp; Metadata) is created initially</li>
<li>Subsequent issues are created after previous PRs are merged</li>
<li>This ensures each issue builds on completed changes</li>
</ul>
Issue sequence:
<ul><li>Issue 1: General Information &amp; Metadata</li>
<li>Issue 2: Data Content &amp; Processing (created after Issue 1 merged)</li>
<li>Issue 3: Documentation (created after Issue 2 merged)</li>
<li>Issue 4: Tests &amp; CI/CD (created after Issue 3 merged)</li>
</ul></li>
<li>
<strong>Present Review Plan</strong>
<ul><li>Summary of findings</li>
<li>List of issues to be addressed</li>
<li>Provide explicit instructions for user to review Issue #1 on GitHub</li>
<li>Request user confirmation before proceeding</li>
</ul></li>
</ol></div>
<div class="section level3">
<h3 id="id_2-create-phase">2. CREATE Phase<a class="anchor" aria-label="anchor" href="#id_2-create-phase"></a></h3>
<p>After user approval, work on issues ONE AT A TIME.</p>
<p><strong>SEQUENTIAL WORKFLOW:</strong> 1. User runs <code>/review-package</code> to start - only Issue #1 is created 2. User reviews Issue #1 on GitHub and confirms readiness 3. User runs <code>/review-issue 1</code> to work on Issue #1 4. Claude presents planned changes and waits for user confirmation 5. After user approval, Claude creates a new branch from <code>dev</code> 6. Claude implements all changes for this issue 7. Claude commits changes with descriptive message 8. Claude creates a PR <strong>against the <code>dev</code> branch</strong> (NOT main!) 9. <strong>CLAUDE MUST STOP COMPLETELY</strong> - Do not proceed to next issue 10. User reviews the PR, merges it to dev 11. User runs <code>/create-next-issue</code> to create Issue #2 12. Repeat steps 2-11 for each subsequent issue</p>
<p><strong>CRITICAL</strong>: Claude MUST NOT automatically continue to the next issue. The workflow STOPS after creating each PR.</p>
<p><strong>After Creating Issue #1:</strong> - User should review Issue #1 on GitHub to confirm the checklist items - User can make any necessary adjustments to the issue description - When ready, user runs <code>/review-issue 1</code> to start working on it - Each issue builds on the previous one, ensuring changes are cumulative throughout the review process</p>
<div class="section level4">
<h4 id="issue-1-general-information--metadata">Issue 1: General Information &amp; Metadata<a class="anchor" aria-label="anchor" href="#issue-1-general-information--metadata"></a></h4>
<p><strong>Claude must check off items as completed and update the issue</strong></p>
<ul class="task-list"><li>
<label><input type="checkbox">DESCRIPTION file completeness</label>
<ul><li>Title (descriptive, &lt;65 characters)</li>
<li>Description (clear purpose statement)</li>
<li>Authors with ORCID IDs</li>
<li>License: CC BY 4.0</li>
<li>Dependencies properly declared</li>
<li>Version follows semantic versioning</li>
</ul></li>
<li><label><input type="checkbox">If updates are made to DESCRIPTION, run <code><a href="https://openwashdata-dev.github.io/washr/reference/update_description.html" class="external-link">washr::update_description()</a></code></label></li>
<li><label><input type="checkbox">CITATION.cff file present and valid</label></li>
<li><label><input type="checkbox">Generate citation using <code><a href="https://openwashdata-dev.github.io/washr/reference/update_citation.html" class="external-link">washr::update_citation()</a></code> for now without a DOI</label></li>
</ul></div>
<div class="section level4">
<h4 id="issue-2-data-content--processing">Issue 2: Data Content &amp; Processing<a class="anchor" aria-label="anchor" href="#issue-2-data-content--processing"></a></h4>
<p><strong>File Structure</strong> - [ ] All primary data files are present in <code>data/</code> and use <code>.rda</code> format - [ ] All raw or exportable data files (CSV/XLSX) are in <code>inst/extdata/</code> - [ ] Main dataset accessible via function matching package name - [ ] No sensitive or personally identifiable information is present</p>
<p><strong>Data Quality Checks</strong> - [ ] Missing values properly coded as <code>NA</code> - [ ] Categorical variables checked for consistency - [ ] Date variables in proper format - [ ] Numeric variables have reasonable ranges - [ ] All text data encoded in UTF-8</p>
<p><strong>Data Processing Script</strong> - [ ] data_processing.R in data-raw/ - [ ] Script is reproducible and well-commented - [ ] Raw data files preserved in data-raw/ - [ ] dictionary.csv with variable descriptions - [ ] Uses tidyverse conventions - [ ] Handles data cleaning transparently - [ ] Analysis and testing scripts preserved in analysis/ directory</p>
</div>
<div class="section level4">
<h4 id="issue-3-documentation">Issue 3: Documentation<a class="anchor" aria-label="anchor" href="#issue-3-documentation"></a></h4>
<ul class="task-list"><li><label><input type="checkbox">README.Rmd follows openwashdata template</label></li>
<li><label><input type="checkbox">Dynamic content generation works</label></li>
<li><label><input type="checkbox">Installation instructions present</label></li>
<li><label><input type="checkbox">Data overview with dimensions</label></li>
<li><label><input type="checkbox">Variable dictionary table rendered</label></li>
<li><label><input type="checkbox">License and citation sections complete</label></li>
<li><label><input type="checkbox">Roxygen documentation for all exported functions</label></li>
<li><label><input type="checkbox">_pkgdown.yml configured with Plausible analytics</label></li>
<li><label><input type="checkbox">Package website builds without errors</label></li>
</ul></div>
<div class="section level4">
<h4 id="issue-4-tests--cicd">Issue 4: Tests &amp; CI/CD<a class="anchor" aria-label="anchor" href="#issue-4-tests--cicd"></a></h4>
<ul class="task-list"><li><label><input type="checkbox">Add GitHub Actions workflow for R-CMD-check</label></li>
<li><label><input type="checkbox">Add R-CMD-check badge to README.Rmd</label></li>
<li><label><input type="checkbox">Package passes <code><a href="https://devtools.r-lib.org/reference/check.html" class="external-link">devtools::check()</a></code> with no errors/warnings</label></li>
<li><label><input type="checkbox">Examples run successfully</label></li>
<li><label><input type="checkbox">Data loads correctly</label></li>
</ul><p><strong>MANDATORY PROCESS FOR EACH ISSUE</strong>: 1. Present planned changes and request user confirmation before implementing - <strong>ALWAYS WAIT</strong> for explicit user approval (yes/no/edit) before proceeding 2. Create a feature branch from <code>dev</code> (e.g., <code>issue-1-metadata</code>) 3. Implement changes with regular check-ins: - <strong>For each checklist item or major change:</strong> - Announce the specific change - Implement it - Show the result - <strong>CHECK-IN</strong>: “Ready to commit this change? (commit/continue)” - If “commit”: Create atomic commit for this change 4. Run tests after all changes 5. Update the GitHub issue to check off completed items: - Use <code>gh issue view [number]</code> to get current issue body - Update checkboxes from <code>- [ ]</code> to <code>- [x]</code> for completed items - Use <code>gh issue edit [number] --body "[updated body]"</code> to save 6. Create PR with detailed summary including all commits: ``` gh pr create –base dev –title “Fix Issue #1: [Description]”<br>
–body “## Summary Addresses Issue #[number]</p>
<p>## Changes Made - [Specific changes]</p>
<p>## Completed Checklist Items - [x] Item 1 - [x] Item 2</p>
<p>Closes #[number]” ``<code>7. **STOP IMMEDIATELY** - Output: "✅ PR created for Issue #[number]. Issue checklist updated. Please review and merge to dev, then run</code>/create-next-issue` to continue.” 8. <strong>DO NOT PROCEED</strong> to any other issue</p>
</div>
</div>
<div class="section level3">
<h3 id="id_3-test-phase">3. TEST Phase<a class="anchor" aria-label="anchor" href="#id_3-test-phase"></a></h3>
<p>Run comprehensive package checks:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">devtools</span><span class="fu">::</span><span class="fu"><a href="https://devtools.r-lib.org/reference/check.html" class="external-link">check</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="fu">devtools</span><span class="fu">::</span><span class="fu"><a href="https://devtools.r-lib.org/reference/build.html" class="external-link">build</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="fu">pkgdown</span><span class="fu">::</span><span class="fu"><a href="https://pkgdown.r-lib.org/reference/build_site.html" class="external-link">build_site</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>Verify: - All tests pass - No R CMD check issues - Documentation renders correctly - Website builds successfully</p>
</div>
<div class="section level3">
<h3 id="id_4-deploy-phase">4. DEPLOY Phase<a class="anchor" aria-label="anchor" href="#id_4-deploy-phase"></a></h3>
<ol style="list-style-type: decimal"><li>Build and deploy pkgdown website</li>
<li>Verify Plausible analytics tracking</li>
<li>Confirm all changes are committed</li>
<li>Approve PR merge to main branch</li>
<li>Create release using <code>/create-release</code> command</li>
</ol></div>
</div>
<div class="section level2">
<h2 id="key-standards">Key Standards<a class="anchor" aria-label="anchor" href="#key-standards"></a></h2>
<div class="section level3">
<h3 id="required-files-structure">Required Files Structure<a class="anchor" aria-label="anchor" href="#required-files-structure"></a></h3>
<pre><code>package-name/
├── DESCRIPTION
├── NAMESPACE
├── R/
│   └── package-name.R
├── data/
│   └── package-name.rda
├── data-raw/
│   ├── data_processing.R
│   └── dictionary.csv
├── inst/
│   ├── CITATION
│   └── extdata/
│       ├── package-name.csv
│       └── package-name.xlsx
├── man/
├── vignettes/                # Optional vignettes directory
│   └── articles/             # Always use articles/ subdirectory
│       └── example.Rmd       # Keep all vignettes here
├── analysis/                 # Analysis and testing scripts (not built)
│   ├── test_package.R
│   ├── data_analysis.R
│   └── validation.R
├── README.Rmd
├── README.md
├── NEWS.md                   # Package changelog
├── CITATION.cff
├── _pkgdown.yml              # Standard openwashdata configuration
├── .Rbuildignore
└── .github/
    └── workflows/
        └── R-CMD-check.yaml</code></pre>
</div>
<div class="section level3">
<h3 id="vignettes-convention">Vignettes Convention<a class="anchor" aria-label="anchor" href="#vignettes-convention"></a></h3>
<p><strong>IMPORTANT</strong>: All vignettes must be stored in the <code>vignettes/articles/</code> subdirectory, not directly in <code>vignettes/</code>. This convention: - Ensures vignettes are rendered correctly by pkgdown - Keeps vignettes separate from package documentation - Prevents CRAN submission issues - Maintains consistency across openwashdata packages</p>
<p>Example structure:</p>
<pre><code>vignettes/
└── articles/
    ├── getting-started.Rmd
    ├── data-analysis.Rmd
    └── case-study.Rmd</code></pre>
</div>
<div class="section level3">
<h3 id="r-scripts-for-reproducibility">R Scripts for Reproducibility<a class="anchor" aria-label="anchor" href="#r-scripts-for-reproducibility"></a></h3>
<p>All R scripts used for testing, validation, and analysis during package development must be preserved in the repository for reproducibility purposes. These scripts should be stored in the <code>analysis/</code> directory at the package root level.</p>
<div class="section level4">
<h4 id="why-analysis-directory">Why <code>analysis/</code> directory:<a class="anchor" aria-label="anchor" href="#why-analysis-directory"></a></h4>
<ul><li>
<strong>Not included</strong> in the installed package (automatically ignored by R CMD build)</li>
<li>
<strong>Available</strong> on GitHub for future reference and reproducibility</li>
<li>
<strong>Organized</strong> separately from package code</li>
<li>
<strong>No configuration needed</strong> - R automatically excludes top-level directories not recognized as package components</li>
</ul></div>
<div class="section level4">
<h4 id="script-organization-in-analysis">Script Organization in <code>analysis/</code>:<a class="anchor" aria-label="anchor" href="#script-organization-in-analysis"></a></h4>
<ul><li>
<code>test_package.R</code> - Scripts for testing package functionality</li>
<li>
<code>data_analysis.R</code> - Exploratory data analysis scripts<br></li>
<li>
<code>validation.R</code> - Data validation and quality checks</li>
<li>
<code>comparison.R</code> - Scripts comparing different data versions</li>
<li>Any other analysis or utility scripts used during development</li>
</ul><p>This approach ensures all analysis work remains transparent and reproducible without affecting package installation or CRAN compliance.</p>
</div>
</div>
<div class="section level3">
<h3 id="package-dependencies">Package Dependencies<a class="anchor" aria-label="anchor" href="#package-dependencies"></a></h3>
<p>Common dependencies for data packages: - dplyr, tidyr (data manipulation) - readr, readxl (data import) - janitor (data cleaning) - desc (DESCRIPTION parsing) - gt, kableExtra (table formatting) - usethis (development workflows, including NEWS.md and versioning)</p>
</div>
<div class="section level3">
<h3 id="quality-criteria">Quality Criteria<a class="anchor" aria-label="anchor" href="#quality-criteria"></a></h3>
<ol style="list-style-type: decimal"><li>
<strong>Reproducibility</strong>: All data processing steps documented and runnable</li>
<li>
<strong>Transparency</strong>: Raw data preserved with clear transformation pipeline</li>
<li>
<strong>Accessibility</strong>: Multiple export formats (R, CSV, XLSX)</li>
<li>
<strong>Documentation</strong>: Comprehensive variable descriptions and usage examples</li>
<li>
<strong>Consistency</strong>: Follows openwashdata naming and structure conventions</li>
</ol></div>
</div>
<div class="section level2">
<h2 id="branch-and-pr-strategy">Branch and PR Strategy<a class="anchor" aria-label="anchor" href="#branch-and-pr-strategy"></a></h2>
<p><strong>Package Review Branch Structure:</strong> - <code>main</code> - Production branch (protected) - <code>dev</code> - Development branch where all review work happens - <code>issue-[n]-description</code> - Feature branches for each issue (created from dev)</p>
<p><strong>PR Flow:</strong> 1. Each issue gets its own PR from feature branch → dev 2. User reviews and merges each issue PR to dev 3. After ALL issues are resolved, create final PR from dev → main 4. Never create PRs directly to main during the review process</p>
</div>
<div class="section level2">
<h2 id="commands">Commands<a class="anchor" aria-label="anchor" href="#commands"></a></h2>
<ul><li>
<code>/review-package [package-name]</code> - Start package review (analyzes package and creates Issue #1 only)</li>
<li>
<code>/review-issue [number]</code> - Work on specific issue (STOPS after creating PR)</li>
<li>
<code>/create-next-issue</code> - Create the next issue in sequence (after previous PR merged)</li>
<li>
<code>/review-status</code> - Check current review progress</li>
<li>
<code>/review-complete</code> - After all issues merged to dev, create final PR to main</li>
<li>
<code>/create-release [version]</code> - Create a new release with changelog</li>
</ul></div>
<div class="section level2">
<h2 id="review-workflow-summary">Review Workflow Summary<a class="anchor" aria-label="anchor" href="#review-workflow-summary"></a></h2>
<p>This package review follows a sequential, issue-by-issue approach:</p>
<ol style="list-style-type: decimal"><li>
<strong>Start</strong>: Run <code>/review-package</code> to analyze the package and create Issue #1</li>
<li>
<strong>Work</strong>: Use <code>/review-issue [number]</code> to work on the current issue</li>
<li>
<strong>Submit</strong>: Create a PR to the <code>dev</code> branch for each issue</li>
<li>
<strong>Continue</strong>: After merging, run <code>/create-next-issue</code> to create the next issue</li>
</ol><p>This ensures that: - Each issue builds on the changes from previous issues - The <code>dev</code> branch stays up-to-date throughout the review - Changes are reviewed and merged incrementally - The final PR from <code>dev</code> to <code>main</code> contains all cumulative improvements</p>
</div>
<div class="section level2">
<h2 id="issue-resolution-workflow">Issue Resolution Workflow<a class="anchor" aria-label="anchor" href="#issue-resolution-workflow"></a></h2>
<p>When working on each issue via <code>/review-issue [number]</code>:</p>
<ol style="list-style-type: decimal"><li><p><strong>Branch</strong> - Create feature branch from dev: <code>git checkout -b issue-[number]-description</code></p></li>
<li>
<p><strong>Analyze</strong> - Review the specific issue requirements and checklist items</p>
<ul><li>Present analysis of what needs to be done</li>
<li>
<strong>CHECK-IN #1</strong>: “Here’s what I found. Should I proceed with these changes? (yes/no)”</li>
</ul></li>
<li>
<p><strong>Implement Changes in Stages</strong></p>
<ul><li>For each major change or checklist item:
<ol style="list-style-type: lower-alpha"><li>Announce what you’re about to do</li>
<li>Make the change</li>
<li>Show the result</li>
<li>
<strong>CHECK-IN</strong>: “Change completed. Ready to commit? Type ‘commit’ to save this change, or ‘continue’ to make more changes.”</li>
<li>If user says “commit”: Run <code>git add -A &amp;&amp; git commit -m "Description of this specific change"</code>
</li>
</ol></li>
<li>Repeat for each significant change</li>
</ul></li>
<li>
<p><strong>Test</strong> - After all changes, verify everything works</p>
<ul><li>Run relevant tests (devtools::check(), build_readme(), etc.)</li>
<li>
<strong>CHECK-IN</strong>: “All tests passed. Ready to finalize? (yes/no)”</li>
</ul></li>
<li>
<p><strong>Update Issue</strong> - Check off completed items in the issue checklist</p>
<ul><li>Use <code>gh issue view [number]</code> to get current issue body</li>
<li>Update checkboxes from <code>- [ ]</code> to <code>- [x]</code> for completed items</li>
<li>Use <code>gh issue edit [number] --body "[updated body]"</code> to save</li>
<li>
<strong>CHECK-IN</strong>: “Issue checklist updated. Ready to create PR? (yes/no)”</li>
</ul></li>
<li>
<p><strong>Final Commit</strong> (if any uncommitted changes)</p>
<ul><li><code>git add -A &amp;&amp; git commit -m "Final updates for Issue #[number]"</code></li>
</ul></li>
<li><p><strong>Push</strong> - Push branch: <code>git push -u origin issue-[number]-description</code></p></li>
<li>
<p><strong>Create PR</strong> - ALWAYS against dev with detailed body:</p>
<pre><code>gh pr create --base dev --title "Fix Issue #[number]: [description]" --body "## Summary
Addresses Issue #[number]

## Changes Made
- [List specific changes made]
- [Include which checklist items were completed]

## Commits in this PR
- [List each commit message]

## Checklist
- [x] Item 1 completed
- [x] Item 2 completed
- [ ] Item 3 (if not completed, explain why)

Closes #[number]"</code></pre>
</li>
<li><p><strong>STOP COMPLETELY</strong> - Output final message and cease all activity</p></li>
</ol><p><strong>CRITICAL STOPPING BEHAVIOR</strong>: - After creating the PR, Claude MUST output: “✅ PR created for Issue #[number]. Please review and merge to dev, then run <code>/review-issue [next-number]</code> to continue with the next issue.” - Claude MUST NOT continue with any other tasks - Claude MUST NOT suggest next steps - Claude MUST NOT start working on the next issue - The conversation effectively ends until the user explicitly restarts with <code>/review-issue [next-number]</code></p>
</div>
<div class="section level2">
<h2 id="check-in-points-and-commit-strategy">Check-In Points and Commit Strategy<a class="anchor" aria-label="anchor" href="#check-in-points-and-commit-strategy"></a></h2>
<p><strong>Claude MUST pause at these check-in points:</strong></p>
<ol style="list-style-type: decimal"><li>
<strong>Initial Analysis Check-In</strong>
<ul><li>After analyzing the issue requirements</li>
<li>Before making any changes</li>
<li>Ask: “Here’s what I plan to do: [list]. Should I proceed? (yes/no)”</li>
</ul></li>
<li>
<strong>Per-Change Check-Ins</strong>
<ul><li>After EACH significant change (e.g., each checklist item)</li>
<li>Show what was changed</li>
<li>Ask: “Ready to commit this change? (commit/continue)”</li>
<li>If “commit”: Create atomic commit with descriptive message</li>
</ul></li>
<li>
<strong>Test Results Check-In</strong>
<ul><li>After running tests</li>
<li>Show test results</li>
<li>Ask: “All tests passed. Ready to finalize? (yes/no)”</li>
</ul></li>
<li>
<strong>Pre-PR Check-In</strong>
<ul><li>After updating issue checkboxes</li>
<li>Before creating PR</li>
<li>Ask: “Issue updated. Ready to create PR? (yes/no)”</li>
</ul></li>
</ol><p><strong>Commit Guidelines:</strong> - Each commit should be atomic (one logical change) - Use descriptive commit messages - Multiple small commits are preferred over one large commit - Example messages: - “Update DESCRIPTION title and description” - “Add ORCID IDs to authors” - “Configure CC BY 4.0 license” - “Update CITATION with washr::update_citation()”</p>
</div>
<div class="section level2">
<h2 id="example-issue-by-issue-workflow">Example Issue-by-Issue Workflow<a class="anchor" aria-label="anchor" href="#example-issue-by-issue-workflow"></a></h2>
<pre><code>User: /review-issue 1
Claude: [Creates branch issue-1-metadata]
        "I'll work on Issue #1: General Information &amp; Metadata. Here's what needs to be done:
        - Update DESCRIPTION file
        - Fix CITATION.cff
        - Generate citation with washr

        Should I proceed? (yes/no)"

User: yes
Claude: "Starting with DESCRIPTION file updates..."
        [Shows DESCRIPTION changes]
        "✅ DESCRIPTION updated. Ready to commit? (commit/continue)"

User: commit
Claude: [Commits: "Update DESCRIPTION file metadata"]
        "Now working on CITATION.cff..."
        [Shows CITATION.cff changes]
        "✅ CITATION.cff created. Ready to commit? (commit/continue)"

User: commit
Claude: [Commits: "Add CITATION.cff file"]
        "Running washr::update_citation()..."
        [Shows result]
        "✅ Citation updated. Ready to commit? (commit/continue)"

User: commit
Claude: [Commits: "Update CITATION with washr"]
        [Updates Issue #1 checkboxes]
        [Creates PR with 3 commits listed]
        "✅ PR created for Issue #1 with 3 commits. Issue checklist updated. Please review and merge to dev, then run `/review-issue 2` to continue."
        [STOPS COMPLETELY]

[Repeat for all 4 issues]

User: /review-complete
Claude: [Creates final PR from dev to main]
        "✅ All issues resolved. Final PR created from dev to main for package review completion."

[After PR merged to main]

User: /create-release 0.1.0
Claude: [Updates version, creates NEWS.md entry, tags release]
        "✅ Release v0.1.0 created with changelog. Package published!"</code></pre>
</div>
<div class="section level2">
<h2 id="release-management">Release Management<a class="anchor" aria-label="anchor" href="#release-management"></a></h2>
<div class="section level3">
<h3 id="creating-a-release-with-create-release-version">Creating a Release with <code>/create-release [version]</code>
<a class="anchor" aria-label="anchor" href="#creating-a-release-with-create-release-version"></a></h3>
<p>When creating a release, Claude will:</p>
<ol style="list-style-type: decimal"><li>
<strong>Pre-Release Zenodo Check</strong>
<ul><li>
<strong>PAUSE</strong>: Ask user “Before proceeding, please ensure the repository is enabled/synced on Zenodo. Is Zenodo integration enabled for this repo? (yes/no)”</li>
<li>If no: Direct user to enable at <a href="https://zenodo.org/account/settings/github/" class="external-link uri">https://zenodo.org/account/settings/github/</a>
</li>
</ul></li>
<li>
<strong>Update Version</strong>
<ul><li>Use <code><a href="https://usethis.r-lib.org/reference/use_version.html" class="external-link">usethis::use_version()</a></code> to bump version in DESCRIPTION</li>
<li>Follow semantic versioning (major.minor.patch)</li>
</ul></li>
<li>
<strong>Initial Citation Update (without DOI)</strong>
<ul><li>Update version field to match new version</li>
<li>Update date-released to current date</li>
<li>Run <code><a href="https://openwashdata-dev.github.io/washr/reference/update_citation.html" class="external-link">washr::update_citation()</a></code> to sync all citation files (initially without DOI)</li>
<li>Verify version consistency across DESCRIPTION, CITATION, and CITATION.cff</li>
</ul></li>
<li>
<strong>Update NEWS.md</strong>
<ul><li>Use <code><a href="https://usethis.r-lib.org/reference/use_news_md.html" class="external-link">usethis::use_news_md()</a></code> if NEWS.md doesn’t exist</li>
<li>Add new version section with release date</li>
<li>Include summary of changes from recent commits/PRs</li>
<li>Format following tidyverse NEWS conventions:</li>
</ul><div class="sourceCode" id="cb6"><pre class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a><span class="fu"># packagename 0.1.0</span></span>
<span id="cb6-2"><a href="#cb6-2" tabindex="-1"></a></span>
<span id="cb6-3"><a href="#cb6-3" tabindex="-1"></a><span class="ss">* </span>Initial release to GitHub</span>
<span id="cb6-4"><a href="#cb6-4" tabindex="-1"></a><span class="ss">* </span>Added core functionality for X (#1)</span>
<span id="cb6-5"><a href="#cb6-5" tabindex="-1"></a><span class="ss">* </span>Fixed issue with Y (#2)</span>
<span id="cb6-6"><a href="#cb6-6" tabindex="-1"></a><span class="ss">* </span>Enhanced documentation (#3)</span></code></pre></div>
</li>
<li>
<strong>Commit Changes</strong>
<ul><li>Commit with message: “Release version [version]”</li>
<li>Include updates to DESCRIPTION, CITATION.cff, and NEWS.md</li>
<li>Push to main branch</li>
</ul></li>
<li>
<strong>Create GitHub Release</strong>
<ul><li>Use <code>gh release create v[version]</code>
</li>
<li>Include NEWS.md content as release notes</li>
<li>Tag the release commit</li>
<li><strong>Zenodo automatically generates DOI after this step</strong></li>
</ul></li>
<li>
<strong>Post-Release DOI Update</strong>
<ul><li>
<strong>PAUSE</strong>: Ask user “GitHub release created! Please check Zenodo for the generated DOI and provide it (format: 10.5281/zenodo.XXXXXXX):”</li>
<li>Add Zenodo badge to README.Rmd: <code>[![DOI](https://zenodo.org/badge/DOI/10.5281/zenodo.XXXXXXX.svg)](https://doi.org/10.5281/zenodo.XXXXXXX)</code>
</li>
<li>Run <code>washr::update_citation(doi = "10.5281/zenodo.XXXXXXX")</code> with provided DOI</li>
<li>Update all citation files to include DOI</li>
<li>Commit with message: “Add Zenodo DOI to package”</li>
<li>Push DOI updates to main</li>
</ul></li>
<li>
<strong>Update pkgdown Site</strong>
<ul><li>Rebuild site to include new version and DOI badge</li>
<li>Deploy updated documentation</li>
</ul></li>
</ol></div>
<div class="section level3">
<h3 id="newsmd-format-guidelines">NEWS.md Format Guidelines<a class="anchor" aria-label="anchor" href="#newsmd-format-guidelines"></a></h3>
<ul><li>Each version gets its own section with version number and date</li>
<li>Use bullet points for changes</li>
<li>Reference issue/PR numbers in parentheses</li>
<li>Group changes by type (new features, bug fixes, etc.)</li>
<li>Most recent version at the top</li>
<li>Follow tidyverse style guide for NEWS files</li>
</ul><p>Example NEWS.md structure:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a><span class="fu"># washrkenya 0.2.0 (2024-01-15)</span></span>
<span id="cb7-2"><a href="#cb7-2" tabindex="-1"></a></span>
<span id="cb7-3"><a href="#cb7-3" tabindex="-1"></a><span class="fu">## New features</span></span>
<span id="cb7-4"><a href="#cb7-4" tabindex="-1"></a><span class="ss">* </span>Added support for temporal analysis (#12)</span>
<span id="cb7-5"><a href="#cb7-5" tabindex="-1"></a><span class="ss">* </span>New vignette on data visualization (#15)</span>
<span id="cb7-6"><a href="#cb7-6" tabindex="-1"></a></span>
<span id="cb7-7"><a href="#cb7-7" tabindex="-1"></a><span class="fu">## Bug fixes</span></span>
<span id="cb7-8"><a href="#cb7-8" tabindex="-1"></a><span class="ss">* </span>Fixed encoding issues in region names (#10)</span>
<span id="cb7-9"><a href="#cb7-9" tabindex="-1"></a><span class="ss">* </span>Corrected data type for population column (#11)</span>
<span id="cb7-10"><a href="#cb7-10" tabindex="-1"></a></span>
<span id="cb7-11"><a href="#cb7-11" tabindex="-1"></a><span class="fu"># washrkenya 0.1.0 (2023-12-01)</span></span>
<span id="cb7-12"><a href="#cb7-12" tabindex="-1"></a></span>
<span id="cb7-13"><a href="#cb7-13" tabindex="-1"></a><span class="ss">* </span>Initial release</span>
<span id="cb7-14"><a href="#cb7-14" tabindex="-1"></a><span class="ss">* </span>Basic data access functions</span>
<span id="cb7-15"><a href="#cb7-15" tabindex="-1"></a><span class="ss">* </span>Documentation and examples</span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="important-notes">Important Notes<a class="anchor" aria-label="anchor" href="#important-notes"></a></h2>
<ul><li>Always request user confirmation between phases</li>
<li>Check in with user before implementing changes in CREATE phase</li>
<li>Preserve existing git history and commits</li>
<li>Follow tidyverse style guide for R code</li>
<li>Use semantic versioning for package versions</li>
</ul></div>
<div class="section level2">
<h2 id="project-management-with-github-cli">Project Management with GitHub CLI<a class="anchor" aria-label="anchor" href="#project-management-with-github-cli"></a></h2>
<ul><li>List issues: <code>gh issue list</code>
</li>
<li>View issue details: <code>gh issue view 80</code> (e.g., for issue #80 “Rename geographies parameter”)</li>
<li>Create branch for issue: <code>gh issue develop 80</code>
</li>
<li>Checkout branch: <code>git checkout 80-rename-geographies-parameter-to-entities</code>
</li>
<li>Create pull request: <code>gh pr create --title "Rename geographies parameter to entities" --body "Implements #80"</code>
</li>
<li>List pull requests: <code>gh pr list</code>
</li>
<li>View pull request: <code>gh pr view PR_NUMBER</code>
</li>
</ul></div>
<div class="section level2">
<h2 id="buildtestcheck-commands">Build/Test/Check Commands<a class="anchor" aria-label="anchor" href="#buildtestcheck-commands"></a></h2>
<ul><li>Build package: <code>R CMD build .</code>
</li>
<li>Install package: <code>R CMD INSTALL .</code>
</li>
<li>Run all tests: <code>R -e "devtools::test()"</code>
</li>
<li>Run single test: <code>R -e "devtools::test_file('tests/testthat/test-FILE_NAME.R', reporter = 'progress')"</code>
</li>
<li>Run R CMD check: <code>R -e "devtools::check()"</code>
</li>
<li>Build Roxygen2 documentation: <code>R -e "devtools::document()"</code>
</li>
<li>Build vignettes: <code>R -e "devtools::build_vignettes()"</code>
</li>
<li>Build README.md from README.Rmd: <code>R -e "devtools::build_readme()"</code>
</li>
</ul></div>
<div class="section level2">
<h2 id="standard-_pkgdownyml-configuration">Standard _pkgdown.yml Configuration<a class="anchor" aria-label="anchor" href="#standard-_pkgdownyml-configuration"></a></h2>
<p>All openwashdata packages must use the following standard _pkgdown.yml configuration (replace <code>packagename</code> with actual package name):</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a><span class="fu">url</span><span class="kw">:</span><span class="at"> https://github.com/openwashdata/packagename</span></span>
<span id="cb8-2"><a href="#cb8-2" tabindex="-1"></a><span class="fu">template</span><span class="kw">:</span></span>
<span id="cb8-3"><a href="#cb8-3" tabindex="-1"></a><span class="at">  </span><span class="fu">bootstrap</span><span class="kw">:</span><span class="at"> </span><span class="dv">5</span></span>
<span id="cb8-4"><a href="#cb8-4" tabindex="-1"></a><span class="at">  </span><span class="fu">includes</span><span class="kw">:</span></span>
<span id="cb8-5"><a href="#cb8-5" tabindex="-1"></a><span class="fu">    in_header</span><span class="kw">: </span><span class="ch">|</span></span>
<span id="cb8-6"><a href="#cb8-6" tabindex="-1"></a>      &lt;script defer data-domain="openwashdata.github.io" src="https://plausible.io/js/script.js"&gt;&lt;/script&gt;</span>
<span id="cb8-7"><a href="#cb8-7" tabindex="-1"></a></span>
<span id="cb8-8"><a href="#cb8-8" tabindex="-1"></a><span class="fu">home</span><span class="kw">:</span></span>
<span id="cb8-9"><a href="#cb8-9" tabindex="-1"></a><span class="at">  </span><span class="fu">links</span><span class="kw">:</span></span>
<span id="cb8-10"><a href="#cb8-10" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> </span><span class="fu">icon</span><span class="kw">:</span><span class="at"> github</span></span>
<span id="cb8-11"><a href="#cb8-11" tabindex="-1"></a><span class="at">      </span><span class="fu">text</span><span class="kw">:</span><span class="at"> GitHub repository</span></span>
<span id="cb8-12"><a href="#cb8-12" tabindex="-1"></a><span class="at">      </span><span class="fu">href</span><span class="kw">:</span><span class="at"> https://github.com/openwashdata/packagename</span></span>
<span id="cb8-13"><a href="#cb8-13" tabindex="-1"></a><span class="at">  </span><span class="fu">sidebar</span><span class="kw">:</span></span>
<span id="cb8-14"><a href="#cb8-14" tabindex="-1"></a><span class="at">    </span><span class="fu">structure</span><span class="kw">:</span><span class="at"> </span><span class="kw">[</span><span class="at">links</span><span class="kw">,</span><span class="at"> citation</span><span class="kw">,</span><span class="at"> authors</span><span class="kw">,</span><span class="at"> dev</span><span class="kw">,</span><span class="at"> custom</span><span class="kw">]</span></span>
<span id="cb8-15"><a href="#cb8-15" tabindex="-1"></a><span class="at">    </span><span class="fu">components</span><span class="kw">:</span></span>
<span id="cb8-16"><a href="#cb8-16" tabindex="-1"></a><span class="at">      </span><span class="fu">custom</span><span class="kw">:</span></span>
<span id="cb8-17"><a href="#cb8-17" tabindex="-1"></a><span class="at">        </span><span class="fu">title</span><span class="kw">:</span><span class="at"> Funding</span></span>
<span id="cb8-18"><a href="#cb8-18" tabindex="-1"></a><span class="at">        </span><span class="fu">text</span><span class="kw">:</span><span class="at"> This project was funded by the [Open Research Data Program of the ETH Board](https://ethrat.ch/en/eth-domain/open-research-data/).</span></span>
<span id="cb8-19"><a href="#cb8-19" tabindex="-1"></a></span>
<span id="cb8-20"><a href="#cb8-20" tabindex="-1"></a><span class="fu">authors</span><span class="kw">:</span></span>
<span id="cb8-21"><a href="#cb8-21" tabindex="-1"></a><span class="at">  </span><span class="fu">footer</span><span class="kw">:</span></span>
<span id="cb8-22"><a href="#cb8-22" tabindex="-1"></a><span class="at">    </span><span class="fu">roles</span><span class="kw">:</span><span class="at"> </span><span class="kw">[</span><span class="at">cre</span><span class="kw">,</span><span class="at"> fnd</span><span class="kw">]</span></span>
<span id="cb8-23"><a href="#cb8-23" tabindex="-1"></a><span class="at">    </span><span class="fu">text</span><span class="kw">:</span><span class="at"> </span><span class="st">"Crafted by"</span></span>
<span id="cb8-24"><a href="#cb8-24" tabindex="-1"></a><span class="at">  </span><span class="fu">sidebar</span><span class="kw">:</span></span>
<span id="cb8-25"><a href="#cb8-25" tabindex="-1"></a><span class="at">    </span><span class="fu">roles</span><span class="kw">:</span><span class="at"> </span><span class="kw">[</span><span class="at">cre</span><span class="kw">,</span><span class="at"> aut</span><span class="kw">,</span><span class="at"> ctb</span><span class="kw">]</span></span>
<span id="cb8-26"><a href="#cb8-26" tabindex="-1"></a><span class="at">    </span><span class="fu">before</span><span class="kw">:</span><span class="at"> </span><span class="st">"So *who* does the work?"</span></span>
<span id="cb8-27"><a href="#cb8-27" tabindex="-1"></a><span class="at">    </span><span class="fu">after</span><span class="kw">:</span><span class="at"> </span><span class="st">"Thanks all!"</span></span>
<span id="cb8-28"><a href="#cb8-28" tabindex="-1"></a></span>
<span id="cb8-29"><a href="#cb8-29" tabindex="-1"></a><span class="fu">reference</span><span class="kw">:</span></span>
<span id="cb8-30"><a href="#cb8-30" tabindex="-1"></a><span class="kw">-</span><span class="at"> </span><span class="fu">title</span><span class="kw">:</span><span class="at"> </span><span class="st">"Data"</span></span>
<span id="cb8-31"><a href="#cb8-31" tabindex="-1"></a><span class="at">  </span><span class="fu">desc</span><span class="kw">:</span><span class="at"> </span><span class="st">"Access the packagename dataset"</span></span>
<span id="cb8-32"><a href="#cb8-32" tabindex="-1"></a><span class="at">  </span><span class="fu">contents</span><span class="kw">:</span></span>
<span id="cb8-33"><a href="#cb8-33" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> packagename</span></span></code></pre></div>
<p><strong>Key elements:</strong> - URL must point to the correct GitHub repository - Bootstrap 5 theme required - Plausible analytics script in header - Consistent sidebar structure with funding acknowledgment - Standard author role display - Reference section for data access function</p>
</div>
<div class="section level2">
<h2 id="code-style-guidelines">Code Style Guidelines<a class="anchor" aria-label="anchor" href="#code-style-guidelines"></a></h2>
<ul><li>Use 2 spaces for indentation (no tabs)</li>
<li>Maximum 80 characters per line</li>
<li>Use tidyverse style for R code (<code>dplyr</code>, <code>tidyr</code>, <code>purrr</code>)</li>
<li>Use snake_case for function and variable names</li>
</ul></div>
</div>

  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Crafted by Emmanuel Mhango.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

